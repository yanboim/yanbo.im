name: Publish
run-name: Publish
on: [push, workflow_dispatch]

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: Install Zola
        uses: taiki-e/install-action@v2
        with:
          tool: zola@0.19.1
      - name: Check out repository code
        uses: actions/checkout@v4
        with:
          submodules: 'true'
      - name: Build
        run: zola build
      - name: Upload
        uses: wangyucode/sftp-upload-action@v2.0.2
        with:
          host: 'suhail.uberspace.de'
          username: 'aproksha'
          password: ${{ secrets.password }}
          localDir: 'public'
          remoteDir: '/var/www/virtual/aproksha/duckling.aparoksha.dev/'
